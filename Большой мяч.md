# Большой мяч

![alt tag](https://raw.githubusercontent.com/FireFather/BigBallz/master/bitmaps/bigballz.png)

Это **БЕСПЛАТНЫЙ** шахматный движок, совместимый с UCI. Это форк [FatTitz] https://github.com/Sopel97/FatTitz, который является форком [cfish](https://github.com/syzygy1/Cfish).

Большое спасибо Томасу Сопелу за вдохновение при создании этого форка FatTitz.

Этот движок использует оценочную сеть HalfKAv2-2048x2-64-64-1, которая содержит колоссальные **4 раза** знания Stockfish 14. Она была частично обучена на данных Lc0, что придает ей уникальный позиционный стиль, сохраняя при этом тактическая смекалка Stockfish. Сеть обучалась с использованием модификации [современного тренажера NNUE] (https://github.com/glinscott/nnue-pytorch) с использованием общедоступных наборов данных [1] (https://drive. google.com/file/d/1VlhnHL8f-20AXhGkILujnNXHwy9T-MQw/view?usp=sharing), [2](https://drive.google.com/file/d/1seGNOqcVdvK_vPNq98j-zV3XPE5zWAeq/view?usp=sharing), [3](https://drive.google.com/file/d/1RFkQES3DpsiJqsOtUshENTzPfFgUmEff/view?usp=sharing)


## Изменения/улучшения в Fat Titz
- подробности [changes.md](docs/changes.md)
- встроенная сеть nuue
- изменения поиска
- const добавлен к vars и параметрам
- вары перемещены во внутреннюю область видимости
- разрешены предупреждения компиляции
- добавлены lowplyhistory и другие изменения поиска
- скомпилировать информацию, напечатанную при запуске
- исправлено запутанное количество узлов/nps
- неиспользуемые включены удалены
- удален режим анархии
- удалена постоянная таблица транспонирования

Из-за международного интереса к этому проекту, Fat Titz включает этот файл ознакомительных сведений, переведенный на китайский и хинди...
поэтому, чтобы помочь этим усилиям, я добавил документы на японском и русском языках (и добавлю больше позже, когда позволит время).
  
## Компиляция Big Ballz
Для компиляции Big Ballz требуется рабочая среда gcc или clang. Среда [MSYS2](https://www.msys2.org/) рекомендуется для компиляции Big Ballz в Windows (о том, как настроить MSYS2, см. ниже).

Для компиляции введите:

    make target [ARCH=arch] [COMP=компилятор] [COMPCC=gcc-4.8] [дополнительные параметры]

из каталога `src`. Списки поддерживаемых целей, арок и компиляторов можно просмотреть, набрав `make` или `make help`.

Если переменная `ARCH` не установлена ​​или установлена ​​на `auto`, Makefile попытается определить и использовать оптимальные настройки для вашей системы. Если это не удается с ошибкой или дает неудовлетворительные результаты, вы должны установить желаемую архитектуру вручную. Поддерживаются следующие значения ARCH: x86-86-modern, x86-64-avx2, x86-64-bmi2, x86-64-avx512, x86-64-avx2-vnni. , `x86-64-bmi2-vnni`, `x86-64-avx512-vnni`. Требуется поддержка SSSE3, если ваш процессор не поддерживает SSSE3, см. [здесь] (https://www.timeanddate.com/).

Имейте в виду, что бинарный файл Big Ballz, скомпилированный специально для вашей машины, может не работать на других (старых) машинах. Если двоичный файл должен работать на нескольких машинах, установите ARCH на архитектуру, соответствующую самой старой/наименее способной машине.

Дополнительные параметры:

<таблица>
<tr><td><code>pure=yes</code></td><td>Только чистый NNUE (без гибридного или классического режима)</td></tr>
<tr><td><code>numa=no</code></td><td>Отключить поддержку NUMA</td></tr>
<tr><td><code>lto=yes</code></td><td>Компилировать с оптимизацией времени компоновки</td></tr>
<tr><td><code>extra=yes</code></td><td>Компилировать с дополнительными параметрами оптимизации (gcc-7.x и выше)</td></tr>
</таблица>

Добавьте `numa=no`, если компиляция завершается с ошибкой `numa.h: Нет такого файла или каталога` или `не удается найти -lnuma`.

Параметры оптимизации, включенные в настоящее время с помощью `extra=yes`, кажутся менее эффективными после добавления кода NNUE.

## Настройки Big Ballz UCI

#### Анализ Презрение
По умолчанию неуважение устанавливается равным нулю во время анализа, чтобы обеспечить беспристрастный анализ. Установите для этого параметра значение «Белый» или «Черный», чтобы анализировать с пренебрежением к этой стороне.

#### Потоки
Количество потоков процессора, используемых для поиска позиции.

#### Хэш
Размер хеш-таблицы в МБ.

#### Очистить хэш
Очистите хеш-таблицу.

#### Подумай
Пусть Big Ballz обдумывает свой следующий ход, пока противник думает.

#### МультиПВ
Выведите N лучших строк при поиске. Оставьте значение 1 для лучшей производительности.

#### Переместить накладные расходы
Компенсация задержки сети и графического интерфейса (в мс).

#### Медленно движется
Увеличьте, чтобы Big Ballz использовал больше времени, уменьшите, чтобы Big Ballz использовал меньше времени.

#### SyzygyPath
Путь к папкам/каталогам, в которых хранятся файлы базы таблиц Syzygy. Несколько каталогов должны быть разделены знаком ";" в Windows и с помощью «:» в операционных системах на базе Unix. Не используйте пробелы вокруг ";" или же ":".

Пример: `C:\tablebases\wdl345;C:\tablebases\wdl6;D:\tablebases\dtz345;D:\tablebases\dtz6`

#### SyzygyProbeDepth
Минимальная оставшаяся глубина поиска, для которой исследуется позиция. Увеличьте это значение, чтобы зондировать менее агрессивно.

#### Syzygy50MoveRule
Отключите, чтобы розыгрыши правила пятидесяти ходов, обнаруженные зондами Syzygy tablebase, учитывались как выигрыши или проигрыши. Это полезно для заочных игр ICCF.

#### SyzygyProbeLimit
Ограничьте исследование базы данных Syzygy позициями, в которых осталось не более этого количества фигур (включая королей и пешек).

#### SyzygyUseDTM
Используйте базы таблиц Syzygy DTM (еще не выпущенные).

#### BookFile/BestBookMove/BookDepth
Контролируйте использование книг PolyGlot.

#### EvalFile
Имя сетевого файла NNUE.

#### Использовать NNUE
По умолчанию Big Ballz использует NNUE в гибридном режиме Stockfish, где определенные позиции оцениваются с помощью старой ручной оценки. Другими режимами являются Pure (только NNUE) и Classical (только пробная версия).

#### Крупные страницы
Управление выделением хэш-таблицы как больших страниц (LP). В Windows этот параметр не отображается, если в операционной системе отсутствует поддержка LP или если LP не настроен должным образом.

#### НУМА
Эта опция появляется только на машинах NUMA, т. е. на машинах с двумя или более процессорами. Если для этой опции установлено значение «включено» или «все», Big Ballz будет распределять потоки поиска по всем узлам. Если параметр отключен, Big Ballz будет игнорировать архитектуру NUMA машины. В Linux можно указать подмножество узлов, на которых будут запускаться потоки поиска (например, «0-1» или «0,1», чтобы ограничить потоки поиска узлами 0 и 1 из узлов 0-3).

## Как настроить MSYS2
1. Загрузите и установите MSYS2 с веб-сайта [MSYS2](https://www.msys2.org/).
2. Откройте 64-разрядный терминал MSYS2 MinGW (например, через меню «Пуск» Windows).
3. Установите 64-битную цепочку инструментов MinGW, введя `pacman -S mingw-w64-x86_64-toolchain`.
4. Закройте 64-битный терминал MSYS2 MinGW и откройте другой.